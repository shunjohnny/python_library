<!DOCTYPE html>
<html>
<head>
<style>
  body {
    font-family: system-ui, -apple-system, sans-serif;
    max-width: 900px;
    margin: 0 auto;
    background: #f8fafc;
    padding: 2rem;
  }
  .container {
    background: white;
    border-radius: 1rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    overflow: hidden;
  }
  .header {
    background: linear-gradient(135deg, #3b82f6, #1d4ed8);
    color: white;
    padding: 2rem;
  }
  .content {
    padding: 2rem;
  }
  .card {
    background: #f1f5f9;
    border-radius: 0.5rem;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
  }
  .code {
    background: #1e293b;
    color: #e2e8f0;
    padding: 1.5rem;
    border-radius: 0.5rem;
    font-family: monospace;
    margin: 0.5rem 0;
    overflow-x: auto;
    line-height: 1.5;
    white-space: pre;
    tab-size: 4;
  }
  .tag {
    display: inline-block;
    padding: 0.25rem 0.75rem;
    border-radius: 1rem;
    background: #3b82f6;
    color: white;
    font-size: 0.875rem;
    margin: 0.3rem;
  }
  .tag-group {
    margin: 1rem 0;
  }
  .description {
    color: #475569;
    margin: 0.5rem 0;
    line-height: 1.6;
  }
  .method {
    color: #38bdf8;
  }
  .string {
    color: #a5d6ff;
  }
  .comment {
    color: #6b7280;
  }
  .operator {
    color: #ff79c6;
  }
  .success {
    background: #22c55e;
  }
  .warning {
    background: #eab308;
  }
  .info {
    background: #0ea5e9;
  }
  .danger {
    background: #ef4444;
  }
  .primary {
    background: #6366f1;
  }
  .keyword {
    color: #ff79c6;
  }
  .number {
    color: #bd93f9;
  }
</style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ–¼ PIL Modern Guide</h1>
      <p>Pythonã®ç”»åƒå‡¦ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</p>
    </div>
    
    <div class="content">
      <div class="card">
        <h2>ğŸ“ åŸºæœ¬æ“ä½œ</h2>
        <p class="description">ç”»åƒã®èª­ã¿è¾¼ã¿ã€ä¿å­˜ã€è¡¨ç¤ºãªã©ã®åŸºæœ¬çš„ãªæ“ä½œã‚’è¡Œã„ã¾ã™ã€‚</p>
        <div class="code"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image

<span class="comment"># ç”»åƒã‚’é–‹ã</span>
img = Image<span class="operator">.</span><span class="method">open</span>(<span class="string">'image.jpg'</span>)

<span class="comment"># åŸºæœ¬æƒ…å ±ã®å–å¾—</span>
size = img<span class="operator">.</span><span class="method">size</span>            <span class="comment"># (width, height)</span>
mode = img<span class="operator">.</span><span class="method">mode</span>            <span class="comment"># 'RGB', 'RGBA', 'L' ãªã©</span>
format = img<span class="operator">.</span><span class="method">format</span>        <span class="comment"># 'JPEG', 'PNG' ãªã©</span>

<span class="comment"># ç”»åƒã®ä¿å­˜</span>
img<span class="operator">.</span><span class="method">save</span>(<span class="string">'output.png'</span>, optimize=<span class="keyword">True</span>)

<span class="comment"># ç”»åƒã®è¡¨ç¤º</span>
img<span class="operator">.</span><span class="method">show</span>()</div>
        <div class="tag-group">
          <span class="tag info">open: ç”»åƒèª­ã¿è¾¼ã¿</span>
          <span class="tag success">save: ç”»åƒä¿å­˜</span>
          <span class="tag">size: ã‚µã‚¤ã‚ºå–å¾—</span>
          <span class="tag">mode: ã‚«ãƒ©ãƒ¼ãƒ¢ãƒ¼ãƒ‰</span>
          <span class="tag primary">format: ç”»åƒå½¢å¼</span>
        </div>
      </div>

      <div class="card">
        <h2>ğŸ”„ ç”»åƒå¤‰æ›</h2>
        <p class="description">ç”»åƒã®ã‚µã‚¤ã‚ºå¤‰æ›´ã€å›è»¢ã€åˆ‡ã‚ŠæŠœããªã©ã®å¤‰æ›æ“ä½œã‚’è¡Œã„ã¾ã™ã€‚</p>
        <div class="code"><span class="comment"># ã‚µã‚¤ã‚ºå¤‰æ›´ï¼ˆã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ç¶­æŒï¼‰</span>
img<span class="operator">.</span><span class="method">thumbnail</span>((<span class="number">800</span>, <span class="number">600</span>))

<span class="comment"># æŒ‡å®šã‚µã‚¤ã‚ºã«ãƒªã‚µã‚¤ã‚º</span>
resized = img<span class="operator">.</span><span class="method">resize</span>((<span class="number">1024</span>, <span class="number">768</span>))

<span class="comment"># ç”»åƒã®å›è»¢</span>
rotated = img<span class="operator">.</span><span class="method">rotate</span>(<span class="number">90</span>, expand=<span class="keyword">True</span>)

<span class="comment"># ç”»åƒã®åˆ‡ã‚ŠæŠœã</span>
cropped = img<span class="operator">.</span><span class="method">crop</span>((left, top, right, bottom))

<span class="comment"># ç”»åƒã®å¤‰å½¢</span>
from PIL <span class="keyword">import</span> transforms
transformed = img<span class="operator">.</span><span class="method">transform</span>(size, transform.AFFINE, data)</div>
        <div class="tag-group">
          <span class="tag success">thumbnail: ã‚µãƒ ãƒã‚¤ãƒ«ä½œæˆ</span>
          <span class="tag info">resize: ãƒªã‚µã‚¤ã‚º</span>
          <span class="tag warning">rotate: å›è»¢</span>
          <span class="tag warning">crop: åˆ‡ã‚ŠæŠœã</span>
          <span class="tag danger">transform: å¤‰å½¢</span>
        </div>
      </div>

      <div class="card">
        <h2>ğŸ¨ ç”»åƒå‡¦ç†</h2>
        <p class="description">ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼åŠ¹æœã€ã‚«ãƒ©ãƒ¼æ“ä½œã€ç”»åƒåˆæˆãªã©ã®é«˜åº¦ãªå‡¦ç†ã‚’è¡Œã„ã¾ã™ã€‚</p>
        <div class="code"><span class="keyword">from</span> PIL <span class="keyword">import</span> ImageFilter, ImageEnhance

<span class="comment"># ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨</span>
blurred = img<span class="operator">.</span><span class="method">filter</span>(ImageFilter.BLUR)
sharpened = img<span class="operator">.</span><span class="method">filter</span>(ImageFilter.SHARPEN)
edges = img<span class="operator">.</span><span class="method">filter</span>(ImageFilter.FIND_EDGES)

<span class="comment"># ç”»åƒã®å¼·èª¿</span>
enhancer = ImageEnhance<span class="operator">.</span>Contrast(img)
enhanced = enhancer<span class="operator">.</span><span class="method">enhance</span>(<span class="number">1.5</span>)

<span class="comment"># ã‚«ãƒ©ãƒ¼ãƒ¢ãƒ¼ãƒ‰å¤‰æ›</span>
grayscale = img<span class="operator">.</span><span class="method">convert</span>(<span class="string">'L'</span>)      <span class="comment"># ã‚°ãƒ¬ãƒ¼ã‚¹ã‚±ãƒ¼ãƒ«</span>
rgba = img<span class="operator">.</span><span class="method">convert</span>(<span class="string">'RGBA'</span>)    <span class="comment"># ã‚¢ãƒ«ãƒ•ã‚¡ãƒãƒ£ãƒ³ãƒãƒ«ä»˜ã</span></div>
        <div class="tag-group">
          <span class="tag info">filter: ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨</span>
          <span class="tag warning">enhance: ç”»åƒå¼·èª¿</span>
          <span class="tag success">convert: ãƒ¢ãƒ¼ãƒ‰å¤‰æ›</span>
          <span class="tag primary">blend: ç”»åƒåˆæˆ</span>
        </div>
      </div>

      <div class="card">
        <h2>ğŸ›  å®Ÿè·µçš„ãªå‡¦ç†</h2>
        <p class="description">ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«å¯¾å¿œã™ã‚‹å®Ÿè·µçš„ãªç”»åƒå‡¦ç†ã®ä¾‹ã§ã™ã€‚</p>
        <div class="code"><span class="comment"># é€ã‹ã—ç”»åƒã®è¿½åŠ </span>
<span class="keyword">def</span> <span class="method">add_watermark</span>(image, watermark):
    rgba = image<span class="operator">.</span><span class="method">convert</span>(<span class="string">'RGBA'</span>)
    watermark = watermark<span class="operator">.</span><span class="method">resize</span>((
        rgba<span class="operator">.</span>size[<span class="number">0</span>] // <span class="number">4</span>,
        rgba<span class="operator">.</span>size[<span class="number">1</span>] // <span class="number">4</span>
    ))
    pos = (
        rgba<span class="operator">.</span>size[<span class="number">0</span>] - watermark<span class="operator">.</span>size[<span class="number">0</span>] - <span class="number">10</span>,
        rgba<span class="operator">.</span>size[<span class="number">1</span>] - watermark<span class="operator">.</span>size[<span class="number">1</span>] - <span class="number">10</span>
    )
    rgba<span class="operator">.</span><span class="method">paste</span>(watermark, pos, watermark)
    <span class="keyword">return</span> rgba

<span class="comment"># ç”»åƒã®æœ€é©åŒ–</span>
<span class="keyword">def</span> <span class="method">optimize_image</span>(image, quality=<span class="number">85</span>):
    output = BytesIO()
    image<span class="operator">.</span><span class="method">save</span>(
        output,
        format=<span class="string">'JPEG'</span>,
        optimize=<span class="keyword">True</span>,
        quality=quality
    )
    <span class="keyword">return</span> Image<span class="operator">.</span><span class="method">open</span>(output)</div>
        <div class="tag-group">
          <span class="tag success">æœ€é©åŒ–</span>
          <span class="tag warning">é€ã‹ã—è¿½åŠ </span>
          <span class="tag info">ãƒãƒƒãƒå‡¦ç†</span>
          <span class="tag danger">é«˜åº¦ãªåˆæˆ</span>
        </div>
      </div>
    </div>
  </div>
</body>
</html>